# AI 語音生成器 - Coqui XTTS-v2

這是一個基於 Coqui XTTS-v2 的文字轉語音應用程式，提供現代化的網頁界面和豐富的語音客製化功能。

## ✨ 功能特色

### 🎙️ Voice Cloning (新功能！)
- **錄製自己的聲音**：直接在瀏覽器中錄製聲音樣本
- **即時預覽**：錄製完成後立即試聽
- **保存自訂語音**：為您的聲音命名並保存
- **立即使用**：保存後即可在語音選單中選擇您的聲音進行生成

### 🎙️ 多樣化語音選擇
- **預設語音**：
  - **女聲** - 溫柔：柔和親切的女性聲音
  - **女聲** - 活潑：充滿活力的女性聲音
  - **男聲** - 深沉：低沉穩重的男性聲音
  - **中性聲音**：通用中性音色
- **自訂語音**：您錄製並保存的所有聲音

### 🌍 多語言支援
支援 10 種語言：
- 🇨🇳 中文（簡體）
- 🇺🇸 English
- 🇯🇵 日本語
- 🇰🇷 한국어
- 🇪🇸 Español
- 🇫🇷 Français
- 🇩🇪 Deutsch
- 🇮🇹 Italiano
- 🇵🇹 Português
- 🇷🇺 Русский

### ⚙️ 完整語音客製化

#### 基本設定
- **語速控制**：0.5x - 2.0x（慢速到快速）
- **語音類型選擇**：預設語音 + 自訂語音

#### 進階參數
- **Temperature（創造性）**：0.1 - 1.0
  - 控制語音的變化性和表現力
  - 較低值：保守穩定
  - 較高值：更富創意和變化

- **Repetition Penalty（重複懲罰）**：1.0 - 5.0
  - 避免語音重複和長時間停頓
  - 較高值：更少重複

- **Top-P（採樣策略）**：0.1 - 1.0
  - 控制語音生成的多樣性

#### 🎯 快速預設
一鍵套用常見情境：
- **📝 正式**：專業商務場合（較慢語速，保守參數）
- **😊 輕鬆**：日常對話（適中語速，平衡參數）
- **🎉 激動**：活力充沛（快速語速，創新參數）
- **🧘 平靜**：冥想引導（慢速語速，穩定參數）

### 🎨 現代化設計
- **Voice Cloning 介面**：直觀的錄音控制，脈衝動畫效果
- 深色模式主題
- 漸層背景動畫
- 玻璃擬態效果（Glassmorphism）
- 流暢的動畫過渡
- 完整響應式設計

### 🔊 音訊功能
- 即時播放生成的語音
- 下載音訊檔案（WAV 格式）
- 顯示使用的參數詳情

## 📋 系統需求

- Python 3.9 - 3.11 (不支援 Python 3.12+)
- 建議至少 8GB VRAM 的顯示卡（可在較低配置下運行，但速度較慢）
- 首次運行會自動下載模型檔案（約 2GB）

## 🚀 安裝步驟

### 1. 克隆專案

```bash
git clone https://github.com/leelai/xtts-voice-web.git
cd xtts-voice-web
```

### 2. 創建虛擬環境

```bash
python3.10 -m venv venv  # 推薦使用 Python 3.10
source venv/bin/activate  # macOS/Linux
# 或
venv\Scripts\activate  # Windows
```

> **注意**：如果您的系統預設 Python 版本是 3.12 或更高，請務必指定使用 `python3.10` 或 `python3.11` 來創建虛擬環境。```

### 3. 安裝依賴

```bash
pip install -r requirements.txt
pip install pypinyin  # 中文支援
```

### 4. 啟動應用

```bash
python app.py
```

### 5. 訪問應用

打開瀏覽器訪問：`http://localhost:5001`

## 💡 使用說明

### 基本使用
1. **輸入文字**：在文字區域輸入要轉換的內容
2. **選擇語言**：從下拉選單選擇目標語言
3. **選擇語音**：選擇喜歡的語音類型
4. **調整語速**：拖動滑桿設定語速（0.5x - 2.0x）
5. **生成語音**：點擊「生成語音」按鈕
6. **播放/下載**：自動播放或下載音訊檔案

### 進階使用
1. **展開進階選項**：點擊「進階選項」標題
2. **調整參數**：
   - Temperature：控制語音的創造性
   - Repetition Penalty：避免重複
   - Top-P：調整採樣策略
3. **使用快速預設**：點擊預設按鈕快速套用常見設定

### 快速預設說明

| 預設 | 語速 | Temperature | Repetition | Top-P | 適用場景 |
|------|------|-------------|------------|-------|----------|
| 📝 正式 | 0.9x | 0.5 | 2.5 | 0.7 | 商業簡報、正式通知 |
| 😊 輕鬆 | 1.1x | 0.75 | 2.0 | 0.85 | 日常對話、休閒內容 |
| 🎉 激動 | 1.3x | 0.8 | 1.8 | 0.9 | 宣傳、活動、廣告 |
| 🧘 平靜 | 0.8x | 0.4 | 3.0 | 0.6 | 冥想、睡眠引導 |

## 🛠️ 技術棧

- **後端**：Flask
- **AI 模型**：Coqui TTS XTTS-v2
- **深度學習**：PyTorch
- **前端**：HTML5, CSS3, JavaScript
- **音訊處理**：soundfile

## 📁 專案結構

```
xtts-voice-web/
├── app.py                          # Flask 後端伺服器
├── requirements.txt                # Python 依賴
├── README.md                       # 專案說明
├── .gitignore                      # Git 忽略檔案
├── venv/                          # 虛擬環境（不提交）
├── static/
│   ├── audio/                     # 生成的音訊檔案
│   │   └── voices/                # 預設語音參考
│   ├── css/
│   │   └── style.css             # 樣式檔案
│   └── js/
│       └── app.js                # 前端邏輯
└── templates/
    └── index.html                # 主頁面
```

## ⚡ API 使用

### 生成語音

```bash
POST /api/tts
Content-Type: application/json

{
  "text": "要轉換的文字",
  "language": "zh-cn",
  "voice_preset": "female_soft",
  "speed": 1.0,
  "temperature": 0.65,
  "repetition_penalty": 2.0,
  "top_p": 0.8
}
```

### 獲取可用語音

```bash
GET /api/voices
```

## 🎯 參數說明

### voice_preset
- `female_soft`：女聲 - 溫柔
- `female_bright`：女聲 - 活潑
- `male_deep`：男聲 - 深沉
- `neutral`：中性聲音

### language
- `zh-cn`：中文（簡體）
- `en`：English
- `ja`：日本語
- 等等...（參見支援語言列表）

### speed
- 範圍：0.5 - 2.0
- 預設：1.0
- 建議：0.8 - 1.3

### temperature
- 範圍：0.1 - 1.0
- 預設：0.65
- 較低值：更穩定保守
- 較高值：更有創意變化

### repetition_penalty
- 範圍：1.0 - 5.0
- 預設：2.0
- 較高值：減少重複

### top_p
- 範圍：0.1 - 1.0
- 預設：0.8

## 📝 注意事項

- 首次運行需要下載模型，請確保網路連接穩定
- 生成的音訊檔案會自動清理（超過 1 小時的舊檔案）
- 長文字生成可能需要較長時間
- 不同參數組合會產生不同的語音效果，建議多試驗

## 🐛 常見問題

### Q: 生成語音很慢？
A: XTTS-v2 需要較高算力，建議使用有 GPU 的環境。如果使用 CPU，首次生成會較慢。

### Q: 中文語音出現錯誤？
A: 確保已安裝 `pypinyin`：`pip install pypinyin`

### Q: 端口 5000 被占用？
A: macOS 的 AirPlay 可能占用 5000 端口。應用已使用 5001 端口，或在 `app.py` 中修改端口。

### Q: 如何改善語音品質？
A: 嘗試調整 Temperature 和語速，溫和的參數通常產生更穩定的效果。

## 🔮 未來改進

- [ ] 支援用戶上傳自己的聲音樣本
- [ ] 批次處理多個文字
- [ ] 保存使用者偏好設定
- [ ] 添加更多語音預設
- [ ] 情感控制（快樂、悲傷等）
- [ ] 音調調整功能

## 📄 授權

此專案使用 Coqui TTS，請遵守相關授權條款。

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request！

## 🌟 致謝

- [Coqui TTS](https://github.com/coqui-ai/TTS) - 強大的 TTS 引擎
- XTTS-v2 模型開發團隊

---

**享受您的語音生成體驗！** 🎉
